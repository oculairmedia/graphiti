# FalkorDB Configuration for Better Durability
# Place this in docker-compose volumes section

# Enable AOF (Append Only File) for durability
appendonly yes
appendfsync everysec  # Sync to disk every second (good balance)

# RDB Snapshots (keep existing)
save 3600 1     # After 1 hour if at least 1 key changed
save 300 100    # After 5 min if at least 100 keys changed
save 60 10000   # After 60 sec if at least 10000 keys changed

# Memory management
maxmemory 6gb
maxmemory-policy allkeys-lru  # Remove least recently used keys when memory full

# Prevent OOM issues
stop-writes-on-bgsave-error yes
rdbcompression yes
rdbchecksum yes

# Directory for persistence files
dir /var/lib/falkordb/data